<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DAWAT ‚Äì Restaurant Info</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Comic Sans MS', 'Chalkboard SE', cursive;
        background-color: #fff5f5;
        overflow-x: hidden;
    }

    .animated-bg {
        position: fixed;
        inset: 0;
        z-index: -1;
        background: linear-gradient(
            rgba(255, 255, 255, 0.85),
            rgba(255, 255, 255, 0.85)
        ),
        url('https://img.freepik.com/free-vector/hand-drawn-fast-food-background_23-2149013389.jpg');
        background-size: cover;
        animation: panBackground 120s linear infinite;
    }

    @keyframes panBackground {
        from { background-position: 0 0; }
        to { background-position: 1200px 1200px; }
    }

    .glass-card {
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(12px);
        border: 2px solid rgba(239, 68, 68, 0.1);
    }
</style>
</head>

<body>
<div class="animated-bg"></div>

<div class="min-h-screen p-4 md:p-8 relative">

    <!-- ================= HEADER ================= -->
    <header class="flex flex-col md:flex-row md:items-center md:justify-between
        max-w-6xl xl:max-w-7xl mx-auto mb-8 gap-4">

        <div class="text-center md:text-left">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">
                Restaurant INFO üçΩÔ∏è
            </h1>
            <p class="text-gray-600">
                Detailed Billing & Receipt Records
            </p>
        </div>

        <a href="/infos" data-link
            class="flex items-center gap-2 bg-white/80 hover:bg-white
            px-4 py-2 rounded-xl border-2 border-green-100 transition
            shadow-sm text-gray-700 font-bold w-fit mx-auto md:mx-0">
            <i class="fa-solid fa-arrow-left text-green-500"></i>
            Back to Directory
        </a>
    </header>

    <!-- ================= MAIN GRID ================= -->
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-6
        max-w-6xl xl:max-w-7xl mx-auto">

        <!-- ===== LEFT: BASIC DETAILS ===== -->
        <aside class="glass-card rounded-3xl shadow-xl overflow-hidden h-fit">

            <div class="p-6 bg-red-500 text-white">
                <h2 class="font-bold text-xl flex items-center gap-2">
                    <i class="fa-solid fa-circle-info"></i> Basic Details
                </h2>
                <p class="text-red-100 text-xs">
                    Summary of this transaction
                </p>
            </div>

            <div class="p-6 space-y-4">

                <div id="basicLoading" class="text-center py-6">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-500 mx-auto"></div>
                </div>

                <div id="basicDetails" class="hidden space-y-4">

                    <div class="bg-white/50 border-2 border-red-50 p-3 rounded-2xl">
                        <label class="text-[10px] uppercase font-black text-red-400">
                            Billing ID
                        </label>
                        <div class="text-lg font-bold text-gray-800" id="billingId">‚Äî</div>
                    </div>

                    <div class="bg-white/50 border-2 border-red-50 p-3 rounded-2xl">
                        <label class="text-[10px] uppercase font-black text-red-400">
                            Customer Name
                        </label>
                        <div class="text-lg font-bold text-gray-800" id="billingOrder_by">‚Äî</div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-white/50 border-2 border-red-50 p-3 rounded-2xl">
                            <label class="text-[10px] uppercase font-black text-red-400">
                                Items
                            </label>
                            <div class="text-lg font-bold" id="billingTotal_items">‚Äî</div>
                        </div>

                        <div class="bg-white/50 border-2 border-red-50 p-3 rounded-2xl">
                            <label class="text-[10px] uppercase font-black text-red-400">
                                Amount
                            </label>
                            <div class="text-lg font-bold text-red-600" id="billingTotal_amount">
                                ‚Çπ 0
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 bg-green-500 text-white rounded-2xl p-4 text-center shadow-lg">
                        <div class="text-xs uppercase opacity-80">
                            Total Receipts
                        </div>
                        <div class="text-4xl font-black" id="totalReceipts">0</div>
                    </div>

                </div>
            </div>
        </aside>

        <!-- ===== RIGHT: RECEIPTS TABLE ===== -->
        <main class="lg:col-span-2 glass-card rounded-3xl shadow-xl overflow-hidden">

            <div class="p-6 border-b border-red-50
                flex flex-col md:flex-row md:items-center md:justify-between gap-4">

                <div>
                    <h2 class="font-bold text-2xl text-gray-800">
                        Billing Receipts üßæ
                    </h2>
                    <p class="text-sm text-gray-500">
                        Itemized breakdown of the order
                    </p>
                </div>

                <div class="flex gap-2 w-full md:w-auto">
                    <button id="infoExportCsvBtn"
                        class="flex-1 md:flex-none bg-white border-2 border-green-100
                        hover:border-green-400 px-4 py-2 rounded-xl text-sm font-bold">
                        <i class="fa-solid fa-file-csv text-green-500"></i> CSV
                    </button>

                    <button id="infoExportPdfBtn"
                        class="flex-1 md:flex-none bg-red-500 hover:bg-red-600
                        text-white px-4 py-2 rounded-xl text-sm font-bold shadow-md">
                        <i class="fa-solid fa-file-pdf"></i> PDF
                    </button>
                </div>
            </div>

            <div class="p-6">
                <div id="joinLoading" class="text-center py-10">
                    <div class="animate-spin rounded-full h-10 w-10 border-b-4 border-red-500 mx-auto"></div>
                    <p class="text-gray-500 mt-4 font-bold">Serving your data...</p>
                </div>

                <div id="joinTableContainer"
                    class="hidden overflow-x-auto rounded-2xl border-2 border-red-50">

                    <table class="min-w-full text-left text-sm">
                        <thead class="bg-red-500 text-white uppercase tracking-wider">
                            <tr>
                                <th class="px-4 py-4">Receipt ID</th>
                                <th class="px-4 py-4">Category</th>
                                <th class="px-4 py-4">Item</th>
                                <th class="px-4 py-4">Price</th>
                                <th class="px-4 py-4">Staff</th>
                                <th class="px-4 py-4">Email</th>
                                <th class="px-4 py-4">Date</th>
                            </tr>
                        </thead>
                        <tbody id="joinTableBody"
                            class="divide-y divide-red-50 bg-white/40 text-gray-700">
                        </tbody>
                    </table>

                    <p id="noReceipts"
                        class="text-center text-gray-400 p-10 hidden italic">
                        No receipts found for this entry.
                    </p>
                </div>
            </div>
        </main>

    </section>

    <div id="alertContainer" class="fixed top-4 right-4 space-y-2 z-50"></div>

</div>
</body>
</html>